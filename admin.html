<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Admin - PL YT</title>
    <style>
        body { background: #000; color: white; padding: 20px; font-family: sans-serif; }
        .row { background: #111; padding: 15px; margin: 10px 0; border-radius: 8px; display: flex; justify-content: space-between; border: 1px solid #333; }
        button { background: #3ea6ff; border: none; padding: 8px; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h1>üõ†Ô∏è Panel Administratora</h1>
    <div id="uList">Wczytywanie tw√≥rc√≥w...</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, getDocs, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCpp-nUIT7bHmtO8qJI3-Q89biIpsnIBzM",
        authDomain: "polski-youtub2.firebaseapp.com",
        projectId: "polski-youtub2",
        storageBucket: "polski-youtub2.firebasestorage.app",
        messagingSenderId: "325129789226",
        appId: "1:325129789226:web:f68f2f1a1f8f9feaf14853",
        measurementId: "G-B5M3F5J713"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function load() {
        const snap = await getDocs(collection(db, "content"));
        const authors = [...new Set(snap.docs.map(d => d.data().author))];
        const list = document.getElementById('uList');
        list.innerHTML = "";
        
        authors.forEach(email => {
            const div = document.createElement('div');
            div.className = 'row';
            div.innerHTML = `<span>${email}</span> <button id="btn-${email.replace(/[.@]/g, '')}">DAJ ZNACZEK ‚úîÔ∏è</button>`;
            list.appendChild(div);
            document.getElementById(`btn-${email.replace(/[.@]/g, '')}`).onclick = async () => {
                await setDoc(doc(db, "users", email), { verified: true }, { merge: true });
                alert("U≈ºytkownik " + email + " zweryfikowany!");
                location.reload();
            };
        });
    }
    load();
</script>
</body>
</html>
