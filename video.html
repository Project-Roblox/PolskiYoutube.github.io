// Dodaj to do funkcji load() w video.html
async function load() {
    const vRef = doc(db, "content", vid);
    const vSnap = await getDoc(vRef);
    const data = vSnap.data();

    // AUTOMATYCZNE WYÅšWIETLENIE +1
    await updateDoc(vRef, { views: increment(1) });

    document.getElementById('vPlayer').src = data.url;
    document.getElementById('vTitle').innerText = data.title;
    
    // NOWE STATYSTYKI WIDOCZNE DLA KAÅ»DEGO
    document.getElementById('statsBar').innerHTML = `
        <span>ğŸ‘ï¸ ${data.views || 0} wyÅ›wietleÅ„</span> â€¢ 
        <span>ğŸš€ ${data.shares || 0} udostÄ™pnieÅ„</span> â€¢ 
        <span>ğŸ‘ ${data.likes || 0} lajkÃ³w</span>
    `;
    
    // WyÅ›wietlenie autora
    const uSnap = await getDoc(doc(db, "users", data.author));
    const subs = uSnap.exists() ? uSnap.data().subs || 0 : 0;
    document.getElementById('vAuthor').innerHTML = `
        <b>${data.author}</b> ${uSnap.exists() && uSnap.data().verified ? 'âœ”ï¸' : ''} 
        <br><small>${subs} subskrypcji</small>
    `;
}

// Zaktualizuj shareBtn aby naliczaÅ‚ udostÄ™pnienia
document.getElementById('shareBtn').onclick = async () => {
    await updateDoc(doc(db, "content", vid), { shares: increment(1) });
    navigator.clipboard.writeText(window.location.href);
    alert("Skopiowano i naliczono udostÄ™pnienie!");
    location.reload();
};
